(()=>{"use strict";var e,s={797:()=>{const e=window.wp.blocks,s=window.wp.blockEditor,t=window.wp.components,r=window.wp.coreData,i=window.wp.element,n=window.wp.i18n,o=window.ReactJSXRuntime;function l({postId:e}){var s;const{records:t,isResolving:i}=(0,r.useEntityRecords)("postType","post",{include:[e],status:"publish",_fields:["id","title","link","status"],per_page:1,page:1});if(i)return(0,o.jsx)("p",{children:(0,n.__)("Loading…","dmg")});const l=Array.isArray(t)?t[0]:null;if(!l)return(0,o.jsx)("p",{children:(0,n.__)("Post not found or not published.","dmg")});const d=(null!==(s=l.title?.rendered)&&void 0!==s?s:"").replace(/<[^>]*>/g,"");return(0,o.jsxs)("p",{className:"dmg-read-more",children:[(0,n.__)("Read More:","dmg"),(0,o.jsx)("a",{href:l.link,target:"_blank",rel:"noreferrer noopener",children:d})]})}const d=JSON.parse('{"UU":"dmg/read-more"}');(0,e.registerBlockType)(d.UU,{edit:function({attributes:e,setAttributes:d}){const{postId:a}=e,[c,p]=(0,i.useState)(""),[u,h]=(0,i.useState)(1),g=c.trim(),m=/^\d+$/.test(g)?parseInt(g,10):null,v=(0,i.useMemo)(()=>m?{include:[m],status:"publish",_fields:["id","title","link","status"],per_page:1,page:1}:{search:g||void 0,per_page:5,page:u,status:"publish",_fields:["id","title","link","status"],orderby:g?void 0:"date",order:g?void 0:"desc"},[m,g,u,5]),{records:_,isResolving:x,hasResolved:b}=(0,r.useEntityRecords)("postType","post",v),j=Array.isArray(_)?_:[],w=!m&&!g,f=!m&&u>1,k=!m&&5===j.length;return(0,o.jsxs)("div",{...(0,s.useBlockProps)(),children:[(0,o.jsx)(s.InspectorControls,{children:(0,o.jsxs)(t.PanelBody,{title:(0,n.__)("Read More: Select Post","dmg"),initialOpen:!0,children:[(0,o.jsx)(t.SearchControl,{__nextHasNoMarginBottom:!0,label:(0,n.__)("Search posts","dmg"),hideLabelFromVision:!0,value:c,onChange:e=>{p(e),h(1)},placeholder:(0,n.__)("Search by title or paste an ID","dmg")}),x&&(0,o.jsx)(t.Spinner,{}),b&&j.length>0&&(0,o.jsxs)("div",{children:[w&&(0,o.jsx)("h4",{className:"dmg-subheading",children:(0,n.__)("Recent Articles","dmg")}),(0,o.jsx)("div",{role:"list",className:"dmg-post-list",children:j.map((e,s)=>{var r;return(0,o.jsxs)("div",{role:"listitem",className:"dmg-post-item",children:[(0,o.jsx)(t.Button,{variant:"link",onClick:()=>d({postId:e.id}),className:"dmg-post-link",children:null!==(r=e?.title?.rendered)&&void 0!==r?r:""}),s<j.length-1&&(0,o.jsx)("hr",{className:"dmg-post-sep"})]},e.id)})}),!m&&(0,o.jsxs)("div",{className:"dmg-pagination",children:[(0,o.jsx)(t.Button,{disabled:!f,onClick:()=>h(u-1),children:(0,n.__)("Previous","dmg")}),(0,o.jsx)(t.Button,{disabled:!k,onClick:()=>h(u+1),children:(0,n.__)("Next","dmg")})]})]}),b&&0===j.length&&!x&&(0,o.jsx)("p",{children:(0,n.__)("No results","dmg")}),a?(0,o.jsx)("div",{style:{marginTop:12},children:(0,o.jsx)(t.Button,{variant:"tertiary",onClick:()=>d({postId:0}),children:(0,n.__)("Clear selection","dmg")})}):null]})}),a?(0,o.jsx)(l,{postId:a}):(0,o.jsx)("p",{children:(0,n.__)("Select a post in the block settings →","dmg")})]})}})}},t={};function r(e){var i=t[e];if(void 0!==i)return i.exports;var n=t[e]={exports:{}};return s[e](n,n.exports,r),n.exports}r.m=s,e=[],r.O=(s,t,i,n)=>{if(!t){var o=1/0;for(c=0;c<e.length;c++){for(var[t,i,n]=e[c],l=!0,d=0;d<t.length;d++)(!1&n||o>=n)&&Object.keys(r.O).every(e=>r.O[e](t[d]))?t.splice(d--,1):(l=!1,n<o&&(o=n));if(l){e.splice(c--,1);var a=i();void 0!==a&&(s=a)}}return s}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[t,i,n]},r.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={532:0,708:0};r.O.j=s=>0===e[s];var s=(s,t)=>{var i,n,[o,l,d]=t,a=0;if(o.some(s=>0!==e[s])){for(i in l)r.o(l,i)&&(r.m[i]=l[i]);if(d)var c=d(r)}for(s&&s(t);a<o.length;a++)n=o[a],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(c)},t=globalThis.webpackChunkdmg=globalThis.webpackChunkdmg||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))})();var i=r.O(void 0,[708],()=>r(797));i=r.O(i)})();